{% extends "bootstrap/base.html" %}

{% block title %}
{% endblock %}

{% block navbar %}
<div class = "navbar navbar-inverse" role = "navigation">
    <div class = "container">
        <div class = "navbar-header">
            <button type = "button" class = "navbar-toggle" data-toggle = "collapse" data-target = ".navbar-collapse">
                <span class = "sr-only">Toggle navigation</span>
                <span class = "icon-bar"></span>
                <span class = "icon-bar"></span>
                <span class = "icon-bar"></span>
            </button>
            <a class = "navbar-brand" href = "/">Brewery Pi</a>
        </div>
        <div class = "navbar-collapse collapse">
            {% if current_user.is_authenticated %}
            <ul class = "nav navbar-nav">
                {% if current_user.isAdministrator() %}
                    <li class = "dropdown"><a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">Configuration <span class="caret"></span></a>
                        <ul class = "dropdown-menu">
                            <li><a href = "{{ url_for("physicalModels.selectPhysicalModel") }}">Brewery Modeling</a></li>
                            <li><a href = "{{ url_for("lookups.selectLookup") }}">Lookups</a></li>
                            <li><a href = "{{ url_for("unitOfMeasurements.listUnitOfMeasurements") }}">Units</a></li>
                            <li><a href = "{{ url_for("users.listUsers") }}">Users</a></li>
                        </ul>
                    </li>
                {% endif %}
                    <li class = "dropdown"><a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">Tags <span class="caret"></span></a>
                        <ul class = "dropdown-menu">
                            <li><a href = "{{ url_for("tags.selectTag") }}">Tags</a></li>
                            {% if current_user.isAdministrator() %}
                                <li><a href = "{{ url_for("tags.importTags") }}">Import</a></li>
                                <li><a href = "{{ url_for("tags.exportTags") }}">Export</a></li>
                            {% endif %}
                        </ul>
                    </li>
                {% if current_user.isAdministrator() %}
                    <li class = "dropdown"><a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">Elements <span class="caret"></span></a>
                        <ul class = "dropdown-menu">
                            <li><a href = "{{ url_for("elements.selectElement") }}">Elements</a></li>
                            <li><a href = "{{ url_for("elementAttributes.importElementAttributes") }}">Import</a></li>
                            <li><a href = "{{ url_for("elementAttributes.exportElementAttributes") }}">Export</a></li>
                        </ul>
                    </li>
                    {% if config["IS_RASPBERRY_PI"] %}
                        <li class = "dropdown"><a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">Raspberry Pi <span class="caret"></span></a>
                            <ul class = "dropdown-menu">
                                <li><a href = "{{ url_for("raspberryPiUtilities.backupDatabase") }}">Backup Database</a></li>
                                <li><a href = "{{ url_for("raspberryPiUtilities.info") }}">Info</a></li>
                                <li><a href = "{{ url_for("raspberryPiUtilities.reboot") }}">Reboot</a></li>
                                <li><a href = "{{ url_for("raspberryPiUtilities.restoreDatabase") }}">Restore Database</a></li>
                                <li><a href = "{{ url_for("raspberryPiUtilities.shutdown") }}">Shutdown</a></li>
                            </ul>
                        </li>
                    {% endif %}
                {% endif %}
                <li class = "dropdown"><a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">Event Frames <span class="caret"></span></a>
                    <ul class = "dropdown-menu">
                        <li><a href = "{{ url_for("eventFrames.selectEventFrame") }}">Event Frames</a></li>
                    </ul>
                </li>
                {% if config["IS_RASPBERRY_PI"] %}
                    <li><a href = "/grafana" target = "_blank">Reports</a></li>
                {% endif %}
            </ul>
            {% endif %}
            <ul class = "nav navbar-nav navbar-right">
                {% if current_user.is_authenticated %}
                <li class = "dropdown"><a href = "#" class = "dropdown-toggle" data-toggle = "dropdown">{{ current_user.Name }} <span class="caret"></span></a>
                    <ul class = "dropdown-menu">
                        <li><a href = "{{ url_for("authentications.logout") }}">Logout</a></li>
                        <li><a href = "{{ url_for("users.changePassword", userId = current_user.UserId) }}">Change Password</a></li>
                    </ul>
                </li>
                {% else %}
                    <li><a href = "{{ url_for("authentications.login") }}">Log In</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class = "container">
    <div id = "divFlashedMessages">
        {% for category, message in get_flashed_messages(with_categories = true) %}
            {% if category == "message" %}
                {% set alertClass = "alert alert-warning" %}
            {% else %}
                {% set alertClass = category %}
            {% endif %}
            <div class = "{{ alertClass }}">
                <button type = "button" class = "close" data-dismiss = "alert">&times;</button>
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% block page_content %}
    {% endblock %}
</div>
{% endblock %}
